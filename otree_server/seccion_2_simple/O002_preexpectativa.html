{{ block content }}
    <!-- Version 1.0 -->
    <link rel="stylesheet" href="{{ static 'global/base.css' }}">
    <div class="row">
        <div class="container-fluid">
            <div class="row text-center mt-5">
                <div class="alert alert-primary" role="alert">
                    <h2 class="text-capitalize">Seccion 2 - Expectativas</h2>
                </div>
            </div>
            <div id="error_msg" class="row d-none">
                <div class="alert alert-danger d-flex align-items-center" role="alert">
                    Porfavor, arrastre los puntos hasta que sumen un total de 8 indicando cuantos compradores en cuantas rondas podran realizar una compra.
                </div>
            </div>
            <div class="row mb-3">
                <p class="fw-bold">Por favor, conteste la siguiente pregunta:</p>
                {{ if fmi }}
                    <p>En la <b>Sección 2</b>, ¿en cuántos períodos cree que el número de compradores de su grupo podran que hara una compra es?</p>
                {{ else }}
                    <p>En la <b>Sección 2</b>, ¿en cuántos períodos cree que el número de compradores de su grupo haria una compra es?</p>
                {{ endif }}
            </div>
            <div class="row justify-content-center">
                <div class="col-12 col-md-6">
                    <canvas id="beliefs" width="400" height="400"></canvas>
                </div>
            </div>
            <div class="row my-3 text-center">
                <div class="alert alert-info" role="alert">
                    Suma de todos los periodos: <b id="quantity">0</b>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-2">
                    <button type="button" id="next" class="btn btn-primary">Siguiente</button>
                </div>
            </div>
            <div class="row d-none">
                <input type="number" id="field0" name="expectation_0_before" value="0"/>
                <input type="number" id="field1" name="expectation_1_before" value="0"/>
                <input type="number" id="field2" name="expectation_2_before" value="0"/>
                <input type="number" id="field3" name="expectation_3_before" value="0"/>
                <input type="number" id="field4" name="expectation_4_before" value="0"/>
            </div>
            <div class="row d-none">
                <button id="submit">Siguiente</button>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js" integrity="sha256-+8RZJua0aEWg+QVVKg4LEzEEm/8RFez5Tb4JBNiV5xA=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-dragdata@2.2.4/dist/chartjs-plugin-dragdata.min.js" integrity="sha256-5z6B9mXkOw8GWHtX67T5+Lt1l7lP4cwRQey0w6xKMtw=" crossorigin="anonymous"></script>
    <script src="{{ static 'global/animation.js' }}"></script>
    <script src="{{ static 'global/expectations.js' }}"></script>
    <script>
        setInterval(() => {
            document.getElementById("quantity").innerHTML = get_suma();
        }, 500);

        document.getElementById("next").onclick = () => {
            suma = get_suma();
            data_array = config["data"]["datasets"][0]["data"]
            for (i in data_array){
                document.getElementById("field"+i).value = data_array[i];
            }
            if (suma == 8){
                document.getElementById("submit").click();
            }
            else{
                let err_msg = document.getElementById("error_msg")
                fade_in(err_msg);
                setTimeout(() => fade_out(err_msg), 3000);
            }
        };
    </script>
{{ endblock }}
