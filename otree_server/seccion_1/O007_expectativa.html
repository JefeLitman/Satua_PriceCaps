{{ block content }}
    <!-- Version 1.0 -->
    <link rel="stylesheet" href="{{ static 'global/base.css' }}">
    <div class="row">
        <div class="container-fluid">
            <div class="row text-center mt-5">
                <div class="alert alert-primary" role="alert">
                    <h2 class="text-capitalize">Seccion 1 - Expectativas</h2>
                </div>
            </div>
            <div class="row mb-3">
                <p class="fw-bold">Ahora responda las siguientes preguntas sobre los 40 períodos de intercambio en los que acaba de participar:</p>
                <p>En la Sección 1, ¿en cuántos períodos cree que su grupo compró</p>
            </div>
            <div class="row">
                <div class="col">
                    <p><b>*</b>0 unidades en total?</p>
                </div>
                <div class="col">
                    <input type="number" name="expectation_0_units" id="field1" min="0" max="40" class="form-control">
                    <div class="valid-feedback">
                        ¡Perfecto, muchas gracias!
                    </div>
                    <div class="invalid-feedback">
                        Porfavor corriga este campo.
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <p><b>*</b>1 unidad en total?</p>
                </div>
                <div class="col">
                    <input type="number" name="expectation_1_units" id="field2" min="0" max="40" class="form-control">
                    <div class="valid-feedback">
                        ¡Perfecto, muchas gracias!
                    </div>
                    <div class="invalid-feedback">
                        Porfavor corriga este campo.
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <p><b>*</b>2 unidades en total?</p>
                </div>
                <div class="col">
                    <input type="number" name="expectation_2_units" id="field3" min="0" max="40" class="form-control">
                    <div class="valid-feedback">
                        ¡Perfecto, muchas gracias!
                    </div>
                    <div class="invalid-feedback">
                        Porfavor corriga este campo.
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <p><b>*</b>3 unidades en total?</p>
                </div>
                <div class="col">
                    <input type="number" name="expectation_3_units" id="field4" min="0" max="40" class="form-control">
                    <div class="valid-feedback">
                        ¡Perfecto, muchas gracias!
                    </div>
                    <div class="invalid-feedback">
                        Porfavor corriga este campo.
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <p><b>*</b>4 unidades en total?</p>
                </div>
                <div class="col">
                    <input type="number" name="expectation_4_units" id="field5" min="0" max="40" class="form-control">
                    <div class="valid-feedback">
                        ¡Perfecto, muchas gracias!
                    </div>
                    <div class="invalid-feedback">
                        Porfavor corriga este campo.
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                Tenga en cuenta que la suma de los números que usted proporcione debe ser 40 porque este es el número total de períodos en la Sección 1. Si infringe esta regla los valores invalidos seran resaltados en rojo pidiendo que los corrija.
            </div>
            <div class="row my-3 text-center">
                <div class="alert alert-info" role="alert">
                    Suma de todos los periodos: <b id="quantity">0</b>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-2">
                    <button type="button" id="next" class="btn btn-primary">Siguiente</button>
                </div>
            </div>
            <div class="row d-none">
                <button id="submit">Siguiente</button>
            </div>
        </div>
    </div>
    <script src="{{ static 'global/expectations.js' }}"></script>
    <script>
        setInterval(() => {
            document.getElementById("quantity").innerHTML = get_suma(5);
        }, 500);

        document.getElementById("next").onclick = () => {
            suma = 0;
            for (let i=1; i<=5; i++){
                let field = document.getElementById("field"+i);
                if (field.value != ""){
                    value = parseInt(field.value, 10);
                    if (value >= 0 && value <= 40 && suma + value <= 40){
                        set_valid(field);
                    }
                    else{
                        set_invalid(field);
                    }
                    suma += value;
                }
                else{
                    set_invalid(field);
                }
            }
            if (suma == 40){
                document.getElementById("submit").click();
            }
        };
    </script>
{{ endblock }}
